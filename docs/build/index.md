
<a id='ResonatorFit.jl-Documentation-1'></a>

# ResonatorFit.jl Documentation


<a id='Functions-1'></a>

## Functions

<a id='ResonatorFit.s2p' href='#ResonatorFit.s2p'>#</a>
**`ResonatorFit.s2p`** &mdash; *Function*.

---


```
s2p(file::AbstractString)
```

Imports arrays of frequency and s parameters from a .s2p file

Arg(s):

file - Touchstone file with extension .s2p

Output(s):

frequency, S11, S21, S12, S22 - arrays of freqeuency and s paramters

Example:

f, s11, s21, s12, s22 = s2p("touchstone.s2p")

<a id='ResonatorFit.s21Fit' href='#ResonatorFit.s21Fit'>#</a>
**`ResonatorFit.s21Fit`** &mdash; *Function*.

---


```
s21Fit(freq, s21; pGuess = [0.5], smoothingFactor = 0, iter = 2000, funcTol = 1e-10 )
```

Fits resonator data to a prescribed model using least squares + Nelder Mead.

Arg(s):

`freq` - real array of frequencies

`s21` - complex array of the S21 parameters

(`pGuess`) - array of length 6 for the initial fit parameter guess. The components for are as follows:

  * Qi/1e6

  * BOffsetFromZero

  * strayInductance(nH)

  * dipDepth (magnitude)

  * f0

  * phaseOnResonance

(`smoothingFactor`) - smooths the s21 input using Savitzkyâ€“Golay filter with a window size equal to the smoothing factor

(`iter`) - maximum number of iterations for convergence before optimization gives upgrade_scalar

(`funcTol`) - tolerance for the change in the fit function value between successive iterations

Output(s):

`s21fit` - the fit s21 function given from the same freqeuency input and optimized parameters

`s21smoothed` - smoothed s21 function (if not, then original)

`fitResults` - Optim.jl fitting results where calling fitResults.minimum will give optimized paramters

`fitScore` - value of fitting function at optimized parameters

Example:

`s21fit, s21smoothed, fitResults, fitScore = s21Fit(freq, s21)`


<a id='Utilities-1'></a>

## Utilities

<a id='ResonatorFit.searchdir' href='#ResonatorFit.searchdir'>#</a>
**`ResonatorFit.searchdir`** &mdash; *Function*.

---


```
searchdir(path,key)
```

Search for files matching key in path.

Arg(s):

path - path to search

key - keyword for file(s) to search

Output(s):

files - list of files in path matching key

Example:

juliaFiles = searchdir(path,".jl")

<a id='Base.complex' href='#Base.complex'>#</a>
**`Base.complex`** &mdash; *Function*.

---


```
complex(r, [i])
```

Convert real numbers or arrays to complex. `i` defaults to zero.

```
complex(data::DataFrame, outNames::Array{Symbol,1},  cMap::Array{Int, 2})
```

Complex function written for the DataFrame type.

Arg(s):

data - input of the DataFrame type

outNames - array of symbols corresponding output data column labels

cMap - complex mapping for sNp files, generated by ResonatorFit.complexMapSNP(N)

Output(s):

dataFrame - complex mapped DataFrame

Example:

complexNames = [:frequency, :S11, :S21, :S12, :S22]

dfOut = complex(dfIn, complexNames, complexMapSNP(2))

```
complex(x::DataArray, y::DataArray)
```

Complex function written for the DataArray type.

Arg(s):

x - DataArray of real parts

y - DataArray of imaginary parts

Output(s):

output - complex mapped DataArray

Example:

complexRand = complex(DataArray(rand(10)), DataArray(1im*rand(10)))

<a id='ResonatorFit.complex2dB' href='#ResonatorFit.complex2dB'>#</a>
**`ResonatorFit.complex2dB`** &mdash; *Function*.

---


```
complex2dB(x)
```

Converts a complex number to a magnitube in dB.

Arg(s):

x - complex number or array

Output(s):

db - magnitude in dB

Example:

db = complex2dB([1 + 2im;1 - 2im])

<a id='ResonatorFit.complex2Phase' href='#ResonatorFit.complex2Phase'>#</a>
**`ResonatorFit.complex2Phase`** &mdash; *Function*.

---


```
complex2Phase(x)
```

Converts a complex number to a phase relative to the x axis.

Arg(s):

x - complex number or array

Output(s):

ph - phase relative to the x axis

Example:

ph = complex2Phase([1 + 2im;1 - 2im])

<a id='ResonatorFit.dB2mag' href='#ResonatorFit.dB2mag'>#</a>
**`ResonatorFit.dB2mag`** &mdash; *Function*.

---


```
dB2mag(db)
```

Converts from dB to magnitude.

Arg(s):

db - dB input

Output(s):

mag - magnitude output

<a id='ResonatorFit.mag2dB' href='#ResonatorFit.mag2dB'>#</a>
**`ResonatorFit.mag2dB`** &mdash; *Function*.

---


```
mag2dB(mag)
```

Converts from magnitude to dB.

Arg(s):

mag - mag input

Output(s):

db - dB output


<a id='Index-1'></a>

## Index

- [`Base.complex`](index.md#Base.complex)
- [`ResonatorFit.complex2Phase`](index.md#ResonatorFit.complex2Phase)
- [`ResonatorFit.complex2dB`](index.md#ResonatorFit.complex2dB)
- [`ResonatorFit.dB2mag`](index.md#ResonatorFit.dB2mag)
- [`ResonatorFit.mag2dB`](index.md#ResonatorFit.mag2dB)
- [`ResonatorFit.s21Fit`](index.md#ResonatorFit.s21Fit)
- [`ResonatorFit.s2p`](index.md#ResonatorFit.s2p)
- [`ResonatorFit.searchdir`](index.md#ResonatorFit.searchdir)
